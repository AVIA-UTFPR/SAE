\documentclass[a4]{article}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{../../manual/manual}
\include{mylistings}
\makeindex

\author{Louise A. Dennis}

\title{Gwendolen Tutorial 8 -- Multi-Agent Systems and Communication}

\begin{document}
\maketitle
This is the eighth in a series of tutorials on the use of the \gwendolen\ programming language.  This tutorial covers the use of communication in \gwendolen\ and also looks at setting up a multi-agent system.

Files for this tutorial can be found in the \texttt{mcapl} distribution in the directory \texttt{src/examples/gwendolen/tutorials/tutorial8}.

\section{Pick Up Rubble (Again)}

You will find a \gwendolen\ program in the tutorial directory called \texttt{simple_mas.gwen}.  Its contents should look like Listing~\ref{code:simple_mas}.
\begin{lstlisting}[float,caption=Simple Multi-Agent System,basicstyle=\sffamily,style=easslisting,language=Gwendolen,label=code:simple_mas]
GWENDOLEN

:name: lifter

:Initial Beliefs:

:Initial Goals:

goto55 [perform]

:Plans:

+!goto55 [perform] : {True} <- move_to(5, 5);

+rubble(5, 5): {True} <- lift_rubble;

+human(X, Y): {True} <- .send(medic, :perform, assist_human(X, Y));

:name: medic

:Initial Beliefs:

:Initial Goals:

:Plans:

+.received(:perform, G): {True} <- +!G [perform];

+!assist_human(X, Y) [perform] : {True} <- 
	move_to(X, Y),
	assist;
\end{lstlisting}

This is very similar to the first program in tutorial 2.  However  there are now two agents, \texttt{lifter} and \texttt{medic}.  As in the program in tutoral 2, the lifter robot moves to square (5, 5) and lifts the rubble there.  However if he sees a human he performs a special kind of action which is a \emph{send action}.  This sends a message to the medic agent asking it to perform \texttt{assist\_human(X, Y)}.  When the medic recieves a perform instruction it converts it into a perform goal and if it has a goal to assist a human it moves to their square and assists them.

You can run this program using \texttt{simple\_mas.ail}.  It uses a new environment \texttt{SearchAndRescueMASEnv.java} which is similar to \texttt{SearchAndRescueEnv.java}.

\subsection{Syntax}

A send action starts with the constant \texttt{.send}.  It then has three arguments, the first is the name of the agent to whom the message is to be sent, the second is a performative and the last is a logical term.  The performative can be one of \texttt{:tell}, \texttt{:perform} or \texttt{:achieve}.  \gwendolen\ attaches no particular meaning to these performatives but they are often used to tell an agent to believe something, ask an agent to adopt a perform goal or ask an agent to adopt an achieve goal.

When a message is received \gwendolen\ turns it into an event: \texttt{.received(P, F)} were \texttt{P} is the performative and \texttt{F} is the logical term.  The interpretation of \texttt{:tell}, \texttt{:perform} or \texttt{:achieve} described above that many \gwendolen\ programs involving communication automatically include the following three plans 
\begin{verbatim}
+.received(:tell, B): {True} <- +B;
+.received(:perform, G): {True} <- +!G [perform];
+.received(:achieve, G): {True} <- +!G [achieve];
\end{verbatim}
which embody that interpretation.  However many programs instead choose only to handle certain performatives (e.g., only \texttt{:tell} messages) or only certain message contents, (e.g., \texttt{.received(:perform, assist\_human(X, Y)} only handles messages asking the agent to perform \texttt{assist\_human(X, Y)} for some \texttt{X} and \texttt{Y}).

\subsection{Exercise}
Amend the \texttt{simple\_mas} program so that, instead of sending a perform message, the lifter agent sends a tell message and the medic reacts to the new belief, instead of the new goal.

NB. It is important, for using the \texttt{SearchAndRescueMASEnv.java} environment that the lifting agent be called \texttt{lifter} and the medic agent be called \texttt{medic}.

\section{Two Ways to Create a Multi-Agent System}

In the previous example we put all the agents in a multi-agent system in one file.  However you often want to separate out your agents into two different files.  This is easy to do in \gwendolen.  You write each agent as you normally would in a separate file.  Then in the \texttt{.ail} file for running the system instead of using \texttt{mas.file} you use \texttt{mas.agent.1.file} (for the file containing agent one), \texttt{mas.agent.2.file} etc.  Similarly instead of using a MAS builder you link to individual agent builders.  \gwendolen's agent builder is \texttt{gwendolen.GwendolenAgentBuilder} - so you use \texttt{mas.agent.1.builder = gwendolen.GwendolenAgentBuilder} etc., for each agent rather than \texttt{mas.builder = gwendolen.GwendolenMASBuilder}.

\subsection{Exercise}
Convert \texttt{simple\_mas.gwen} into a system consisting of two agents in different files.  NB.  You will need to make sure both agent files start with the declaration \texttt{GWENDOLEN} for the language the agent is programmed in.

\end{document}
