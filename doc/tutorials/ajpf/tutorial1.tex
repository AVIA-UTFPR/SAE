\documentclass[a4]{article}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{../../manual/manual}
\include{mylistings}
\makeindex

\author{Louise A. Dennis}

\title{AJPF Tutorial 1 -- The Property Specification Language}

\begin{document}
\maketitle
This is the first in a series of tutorials on the use of the \ajpf\ model checking program.  This tutorial covers the basics of configuring a model-checking run and writing properties in \ajpf's property specification language.

Files for this tutorial can be found in the \texttt{mcapl} distribution in the directory \texttt{src/examples/gwendolen/ajpf\_tutorials/tutorial1}.

The tutorials assume some familiarity with the basics of running Java programs either at the command line or in Eclipse.

\section{Setting up Agent Java Pathfinder}
Before you can run \ajpf\ it is necessary to set up your computer to use Java Pathfinder.  There are instructions for doing this in the \mcapl\ manual (which you can find in the \texttt{doc} directory of the distribution.

The key point is that you need to create a file called \texttt{.jpf/site.properties} in the home directory of your computer.  In this file you need to put one line which assigns the path to the \mcapl\ distribution to the key \texttt{mcapl}.  For instance if you have your \mcapl\ distribution in your home directory as  folder called \texttt{mcapl} then \texttt{site.properties} should contain the line.

\begin{verbatim}
mcapl = ${user.home}/mcapl
\end{verbatim}

We strongly recommend that you also set up an environment variable \texttt{\$AJPF\_HOME} and set it to the path to the \mcapl\ directory.

\section{A Simple Model Checking Attempt}

To run \ajpf\ you need to run the program \texttt{gov.jpf.tool.RunJPF} which is contained in \textt{lib/3rdparty/jpf.jar} in the \mcapl\ distribution.  Alternatively you can use the \texttt{run-JPF (MCAPL)} Run Configuration in Eclipse.

You need to supply a JPF Configuration file as an argument.  You will find a sample file in \texttt{src/examples/gwendolen/ajpf\_tutorials/lifterandmedic.jpf}.  If you run this you should see output which starts

\begin{verbatim}
----------------------------------- search started
      [skipping static init instructions]
JavaPathfinder v7.0 (rev ${version}) - (C) RIACS/NASA Ames Research Center


====================================================== system under test
ail.util.AJPF_w_AIL.main("/Users/louiseadennis/Eclipse/mcapl/src/examples/gwendolen/ail_tutorials/tutorial1/answers/ex2.ail","/Users/louiseadennis/Eclipse/mcapl/src/examples/gwendolen/ajpf_tutorials/tutorial1/lifterandmedic.psl","1")

====================================================== search started: 02/02/15 04:30
		 # choice: gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"<root>" ,1/1,isCascaded:false}
		 # garbage collection
[INFO] Adding 0 to []
----------------------------------- [1] forward: 0 new
		 # choice: gov.nasa.jpf.vm.choice.IntChoiceFromSet[id="agentSchedulerChoice",isCascaded:false,>0,1,2]
[INFO] Sleeping agent nurse
		 # garbage collection
[INFO] Adding 1 to [0]
----------------------------------- [2] forward: 1 new
\end{verbatim}

and ends

\begin{verbatim}
[INFO] medic done move_to(5,5)
		 # garbage collection
[INFO] Adding 73 to [0, 78, 79, 80, 91, 92, 93, 95]
----------------------------------- [9] forward: 73 visited
----------------------------------- [8] backtrack: 95
----------------------------------- [8] done: 95
----------------------------------- [7] backtrack: 93
----------------------------------- [7] done: 93
----------------------------------- [6] backtrack: 92
----------------------------------- [6] done: 92
----------------------------------- [5] backtrack: 91
----------------------------------- [5] done: 91
----------------------------------- [4] backtrack: 80
----------------------------------- [4] done: 80
----------------------------------- [3] backtrack: 79
----------------------------------- [3] done: 79
----------------------------------- [2] backtrack: 78
----------------------------------- [2] done: 78
----------------------------------- [1] backtrack: 0
----------------------------------- [1] done: 0
----------------------------------- [0] backtrack: -1
----------------------------------- [0] done: -1
----------------------------------- search finished

====================================================== results
no errors detected

====================================================== statistics
elapsed time:       00:00:18
states:             new=96, visited=116, backtracked=212, end=3
search:             maxDepth=16, constraints hit=0
choice generators:  thread=1 (signal=0, lock=1, shared ref=0), data=95
heap:               new=764145, released=755379, max live=4592, gc-cycles=212
instructions:       122857067
max memory:         490MB
loaded code:        classes=317, methods=4723

====================================================== search finished: 02/02/15 04:30
\end{verbatim}

\end{document}
